<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>凝萌小记</title>
    <description>作家是杂家</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Thu, 24 Aug 2017 16:09:36 +0800</pubDate>
    <lastBuildDate>Thu, 24 Aug 2017 16:09:36 +0800</lastBuildDate>
    <generator>Jekyll v3.4.3</generator>
    
      <item>
        <title>爬虫入门笔记（一）</title>
        <description>&lt;h2 id=&quot;缘起&quot;&gt;缘起&lt;/h2&gt;

&lt;p&gt;三月份的时候，那时的我还很有志气地打算学习数据分析的，然而后来发现自己似乎把技能点点到前端上了。&lt;/p&gt;

&lt;p&gt;数据分析的话要有数据呀，嗯，从网上获取数据吧。手动扒太累了，就写个小程序咯。&lt;/p&gt;

&lt;p&gt;说起来接触Python还是因为认识的同学说想学爬虫，然后问我写爬虫用什么语言好。我百度了一下，似乎写爬虫都用Python，于是我就跟他讲，你学Python吧。后来又由于各种原因我也进了Python的坑。&lt;/p&gt;

&lt;p&gt;那到底什么是爬虫呢？说白了就是自动浏览网页获取网页的自动化程序，其实我们常用搜索引擎就有爬虫技术，比如Google爬虫。至于为什么用Python写，刚刚就说了，大家都用这个写，学的话也容易上手。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017082401/pic01.jpg&quot; alt=&quot;图 - 1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们平时访问网页，表面上就是输入网址-浏览网页-获取信息三步，因此最简单的爬虫就是不断重复这三步。&lt;/p&gt;

&lt;p&gt;事实上，写爬虫这东西，其实并没有太多技术性。但想造出健壮的爬虫，其实并不容易的。爬虫与反爬虫的斗争，大家可以上知乎了解一下：&lt;a href=&quot;https://www.zhihu.com/question/58342241&quot;&gt;知乎 - 有哪些有趣的反爬虫手段？&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;至于爬虫能干啥，请看：&lt;a href=&quot;https://www.zhihu.com/question/27621722&quot;&gt;利用爬虫技术能做到哪些很酷很有趣很有用的事情？&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;所需模块&quot;&gt;所需模块&lt;/h2&gt;

&lt;p&gt;写一个最简单的爬虫，其实只需要这两个模块：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;urllib和urllib2&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一看这个模块名就知道是URL相关的library。具体用法可以参看：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.python.org/3/library/urllib.html&quot;&gt;urllib官方文档&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.python.org/2/library/urllib2.html&quot;&gt;urllib2官方文档&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://cuiqingcai.com/947.html&quot;&gt;静觅 - Python爬虫入门三之Urllib库的基本使用&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://cuiqingcai.com/954.html&quot;&gt;静觅 - Python爬虫入门四之Urllib库的高级用法&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以下语句运行环境为Mac OS／Python2.7.13。&lt;/p&gt;

&lt;p&gt;一开始就说了我们只需要模拟三个步骤：输入网址-浏览网页-获取信息。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;输入网址&quot;&gt;输入网址&lt;/h2&gt;

&lt;p&gt;输入网址是为了获取网页，当然前提是要联网，我们可以先在交互式解释器中看看。&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib2&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://rimoe.ml&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#打开网页http://rimoe.ml&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;                         &lt;span class=&quot;c&quot;&gt;#解析re，输出html格式&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;输出：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1 &lt;span class=&quot;nt&quot;&gt;&amp;lt;addinfourl&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;4436195304&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;whose&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;fp =&lt;/span&gt;&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;lt;socket._fileobject&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;0x10816f8d0&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;&amp;gt;
2 '&lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;lang=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;http-equiv=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;X-UA-Compatible&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;IE=edge&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;\n …… &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;\n'
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017082401/pic02.jpg&quot; alt=&quot;图 - 2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;事实上，获取数据就是这么两句话。在某种意义上来说，网页经已爬下来了，爬虫已经写完啦。&lt;/p&gt;

&lt;p&gt;先压抑内心的小兴奋，爬下来这么一堆东西有啥用呢？&lt;/p&gt;

&lt;p&gt;当然，这样一堆字符看起来没啥用，但我们可以想办法从中间提取想要的元素。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;浏览网页&quot;&gt;浏览网页&lt;/h2&gt;

&lt;p&gt;我们日常浏览的网页一般都是浏览器解析过的标签文件，具体过程可以参考：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/xiangriikui/article/details/52207153&quot;&gt;前端文摘：深入解析浏览器的幕后工作原理&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.cnblogs.com/lhb25/p/how-browsers-work.html&quot;&gt;在浏览器中输入网址到网页展现全部过程&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;当然对于爬虫而言，我们希望程序输出的只包含我们需要的信息，因此我们需要对刚刚抓取的网页进行分析，也就是写程序来代替浏览器解释我们获取的文件（这里是html）。&lt;/p&gt;

&lt;p&gt;这里就可以用到「正则表达式」这个东西了。&lt;/p&gt;

&lt;p&gt;正则表达式，故名思义，就是规则的表达式，或者说是一个样例，通过这个样例我们可以从文本中规范准确地提取符合该样例的部分文本。&lt;/p&gt;

&lt;p&gt;我们可以用正则表达式来提取能够匹配表达式的文本，正则表达式的匹配规则如下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017082401/pic03.png&quot; alt=&quot;图 - 3&quot; /&gt;&lt;/p&gt;

&lt;p&gt;部分注解抄录如下：&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;（1）数量词的贪婪模式与非贪婪模式&lt;/p&gt;

  &lt;p&gt;正则表达式通常用于在文本中查找匹配的字符串。Python里数量词默认是贪婪的（在少数语言里也可能是默认非贪婪），总是尝试匹配尽可能多的字符；非贪婪的则相反，总是尝试匹配尽可能少的字符。例如：正则表达式”ab&lt;em&gt;”如果用于查找”abbbc”，将找到”abbb”。而如果使用非贪婪的数量词”ab&lt;/em&gt;?”，将找到”a”。&lt;/p&gt;

  &lt;p&gt;注：我们一般使用非贪婪模式来提取。&lt;/p&gt;

  &lt;p&gt;（2）反斜杠问题&lt;/p&gt;

  &lt;p&gt;与大多数编程语言相同，正则表达式里使用”\”作为转义字符，这就可能造成反斜杠困扰。假如你需要匹配文本中的字符”\”，那么使用编程语言表示的正则表达式里将需要4个反斜杠”\\”：前两个和后两个分别用于在编程语言里转义成反斜杠，转换成两个反斜杠后再在正则表达式里转义成一个反斜杠。&lt;/p&gt;

  &lt;p&gt;Python里的原生字符串很好地解决了这个问题，这个例子中的正则表达式可以使用r”\”表示。同样，匹配一个数字的”\d”可以写成r”\d”。有了原生字符串，妈妈也不用担心是不是漏写了反斜杠，写出来的表达式也更直观勒。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;图片引用及参考来自：&lt;a href=&quot;http://cuiqingcai.com/977.html&quot;&gt;静觅 - Python爬虫入门七之正则表达式&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Python的re模块可以使用正则表达式匹配字符串：&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;re&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### 举例1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;txt1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'rimoe,rimoe.ml'&lt;/span&gt;          &lt;span class=&quot;c&quot;&gt;#从txt1中搜索关键字'rimoe'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pattern1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'rimoe'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;#用正则表达式生成pattern对象&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txt1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;        &lt;span class=&quot;c&quot;&gt;#查找所有符合表达式的子串&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### 举例2&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;txt2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'1.rimoe&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;2.Yue&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;3.Luo&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;       &lt;span class=&quot;c&quot;&gt;#从txt2中提取列表内容&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pattern2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;r'&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;d+&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.(.*?)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;n'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txt2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#一般用r串作为参数&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#这里\d匹配数字（0～9），+表示匹配连续的数字，\.匹配字符'.'&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#(.*?)匹配连续任意字符任意次，括号表示要提取的部分分组&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#\n匹配回车，(.*?)\n表示任意字符匹配直到遇到回车停止匹配&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;输出&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'rimoe'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'rimoe'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'rimoe'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Yue'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Luo'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;比如对于我们刚刚爬下来的网页，我们想要提取网页的这一部分：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017082401/pic04.jpg&quot; alt=&quot;图 - 4&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们可以右击相应元素，点“检查”（审查元素）查看相对应的标签：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017082401/pic05.jpg&quot; alt=&quot;图 - 5&quot; /&gt;&lt;/p&gt;

&lt;p&gt;当然这里推荐Chrome，主要是因为好用加功能完善，在学习爬虫的道路上这个审查元素的功能和这个开发者选项框将会是你的好基友，弹出的框如下图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017082401/pic06.jpg&quot; alt=&quot;图 - 6&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们可以看到其实这一部分是一个列表标签，在我们刚刚抓取的网页里面也能找到：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017082401/pic07.jpg&quot; alt=&quot;图 - 7&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;ul&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://github.com/codeRimoe/h5_game_kanna&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;h5 Game - 坎娜与托尔&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;  &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://blog.rimoe.ml/2017/06/09/post01/&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;[NOTE BLOG]&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;  &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://rimoe.ml/kanna&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;[TRY NOW]&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://github.com/codeRimoe/Wolf_and_Sheep&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;OOP Homework - Wolf and Sheep&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;  &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;\\&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;[NOTE BLOG]&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;我们用正则表达式来表示,分两次提取：&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#刚刚提取的网页返回res&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;re&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;txt1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pattern1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;r'&amp;lt;li&amp;gt;(.*?)&amp;lt;/li&amp;gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#提取列表标签&amp;lt;li&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#re.S为DOCALL模式，该模式下字符'.'可以匹配回车'\n'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;txt2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txt1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;txt2&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#打印出来看看是什么样子的吧～&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pattern2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;r'&amp;lt;a.*?href=(.*?)&amp;gt;(.*?)&amp;lt;/a&amp;gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;txt&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;txt2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;#逐项提取链接标签&amp;lt;a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Project：'&lt;/span&gt;                    &lt;span class=&quot;c&quot;&gt;#格式化打印&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;':'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;输出：&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;          &amp;lt;a href=&quot;https://github.com/codeRimoe/h5_game_kanna&quot;&amp;gt;h5 Game - &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\xe5\x9d\x8e\xe5\xa8\x9c\xe4\xb8\x8e\xe6\x89\x98\xe5\xb0\x94&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;lt;/a&amp;gt;  &amp;lt;a href=&quot;http://blog.rimoe.ml/2017/06/09/post01/&quot;&amp;gt;[NOTE BLOG]&amp;lt;/a&amp;gt;  &amp;lt;a href=&quot;http://rimoe.ml/kanna&quot;&amp;gt;[TRY NOW]&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;        '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;          &amp;lt;a href=&quot;https://github.com/codeRimoe/Wolf_and_Sheep&quot;&amp;gt;OOP Homework - Wolf and Sheep&amp;lt;/a&amp;gt;  &amp;lt;a href=&quot;http://blog.rimoe.ml/2017/07/27/post01/&quot;&amp;gt;[NOTE BLOG]&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;        '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h5&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Game&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;坎娜与托尔&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://github.com/codeRimoe/h5_game_kanna&quot;&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NOTE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BLOG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://blog.rimoe.ml/2017/06/09/post01/&quot;&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NOW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://rimoe.ml/kanna&quot;&lt;/span&gt;

&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Project&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;：&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OOP&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Homework&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Wolf&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sheep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://github.com/codeRimoe/Wolf_and_Sheep&quot;&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NOTE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BLOG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://blog.rimoe.ml/2017/07/27/post01/&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017082401/pic08.jpg&quot; alt=&quot;图 - 8&quot; /&gt;
&lt;img src=&quot;/img/in-post/2017082401/pic09.jpg&quot; alt=&quot;图 - 9&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;获取信息&quot;&gt;获取信息&lt;/h2&gt;

&lt;p&gt;一般来说数据获取后，要保存到本地，对于列表一般保存为csv格式，这里我们就保存为普通的文本文件。&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#将打印部分修改成保存文档&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'data.txt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'w'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;txt&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;txt2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Project:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;':'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017082401/pic10.jpg&quot; alt=&quot;图 - 10&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#Spider Lv1&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib2&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;re&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://rimoe.ml&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#打开网页http://rimoe.ml&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;txt1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pattern1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;r'&amp;lt;li&amp;gt;(.*?)&amp;lt;/li&amp;gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#提取列表标签&amp;lt;li&amp;gt;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;txt2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txt1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pattern2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;r'&amp;lt;a.*?href=(.*?)&amp;gt;(.*?)&amp;lt;/a&amp;gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'data.txt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'w'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;txt&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;txt2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;#逐项提取链接标签&amp;lt;a&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Project:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;               &lt;span class=&quot;c&quot;&gt;#格式化输出&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;':'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;代码已发到&lt;a href=&quot;https://github.com/codeRimoe/Spider/tree/master/demo/Level_1&quot;&gt;Github - Spider&lt;/a&gt;，保留一切权利。&lt;/p&gt;

&lt;p&gt;爬虫的原理简单粗暴，除了这个简单的爬虫之外，其实还有一些简单易用的现成框架，有硬件条件的话，爬虫的威力其实更大。&lt;/p&gt;

&lt;p&gt;当然有条件的话，最好的爬虫其实是人肉爬虫（滑稽）。&lt;/p&gt;

&lt;p&gt;接下来如果有时间，会继续写完这个爬虫入门笔记系列。&lt;/p&gt;

&lt;p&gt;2017.08.24 午后 于广州&lt;/p&gt;
</description>
        <pubDate>Thu, 24 Aug 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/08/24/post01/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/08/24/post01/</guid>
        
        <category>爬虫</category>
        
        <category>技术</category>
        
        <category>Python</category>
        
        <category>数据获取</category>
        
        
      </item>
    
      <item>
        <title>对学习及未来的一点思考</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;切莫浮沙筑高台，不为繁华易素心。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;弁言&quot;&gt;弁言&lt;/h2&gt;

&lt;p&gt;近日作息挺规律的，在学校里也算是有事可做。暑假一不小心就被弄丢了，似乎做了些什么，又似乎什么也没做。&lt;/p&gt;

&lt;p&gt;有位老师上课说，大学生活也就是 —— 大一搞社团，大二搞妹子，大三才想起要学习，等到大四就准备去实习。&lt;/p&gt;

&lt;p&gt;我一直以为在学习上我是没有停歇过的，上课认真听 —— 然而也还是将许多节课睡过去了，作业认真写 —— 然而还是有许多作业是糊弄过去的。要说学到最多东西的，大概就是看知乎吧。这天下决心学这些，再过几天就把心思放在别的地方。似乎什么都懂一点，但最后却是什么都没得到。&lt;/p&gt;

&lt;p&gt;我以前可有好好真正地「学习」过？&lt;/p&gt;

&lt;p&gt;有的。小学时候为的一道数学题可以沉思好久，初中时候为了学英文每天努力地记单词，高中时候忘我地写作、刻章，为了整理好一页笔记放弃一个晚修，近来研究爬虫和网页时候遇到问题来回踱步。直到今天认真思考怎么画画才回想起那些时候的感觉。所谓学习，原来是专心思考一件事，可以不被一切的一切所吸引。&lt;/p&gt;

&lt;p&gt;一直以来最惹我羡慕两种人，一种是认真的人，一种是固执的人。&lt;/p&gt;

&lt;p&gt;现在看来，和我交心的几个朋友，要不就是认真的人，要不就是固执的人，要不就是既认真又固执的人。&lt;/p&gt;

&lt;p&gt;近来在知乎上看到一句话，我很喜欢，概括起来就是，「认真」、「固执」。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;切莫浮沙筑高台&quot;&gt;切莫浮沙筑高台&lt;/h2&gt;

&lt;p&gt;这句话出处未考，但似乎很多学工科的都很喜欢这句话。&lt;/p&gt;

&lt;p&gt;基础的不认真学好，是造不出好的东西的。我小时候也试过，物理还没学好，就想去看量子力学，然后结果可想而知。&lt;/p&gt;

&lt;p&gt;记得教我概率统计的王向阳老师上课说，数学系的学生对定义是很清晰的，所以数学系的学生做起题来比理工科的学生好。一直以来，作为理科生，我对问题的思考，都是建立在最基础的概念和定义上的，一句话读不懂，就会一个个词语去想，这个是什么。在学术上，定义是不应该也不可能会被糊弄过去的。&lt;/p&gt;

&lt;p&gt;其实最终说明的道理还是一样，浮沙筑不起高台，这也是我为什么对一些简单的学习和作业也认真记录的原因。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;不为繁华易素心&quot;&gt;不为繁华易素心&lt;/h2&gt;

&lt;p&gt;出自元代冯子振的《西湖梅》：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;苏老堤边玉一林，六桥风月是知音。 任他桃李争欢赏，不为繁华易素心。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;本意说的是淡泊名利，志向高洁。&lt;/p&gt;

&lt;p&gt;在瞬息万变的今天，新的事物太多太多，每天都是一个不一样的世界。&lt;/p&gt;

&lt;p&gt;听说人工智能很热，大家都觉得很酷，就有人开始担心人工智能统治世界，或有人都觉得自己也要学学神经网络才行。&lt;/p&gt;

&lt;p&gt;可是神经网络这种上个世纪发明的东西，是哪些人让他变得很酷呢？我想应该是那些不担心自己做的东西会过时，不担心自己研究的东西不是热点的人吧。&lt;/p&gt;

&lt;p&gt;有时候，学习古老的的技术会觉得似乎没什么用，好害怕再过不久旧的技术就会被取代。一直以来都觉得自己学的东西不够前沿，不够酷，感觉自己这也不会，那也不会。但现在想想，那又怎样呢？没有必要让自己为了时代潮流而放弃目前的方向。这也想学，那也想学是不对的。毕竟看见路口就拐弯的话，往往都是回到原点的。&lt;/p&gt;

&lt;p&gt;我所羡慕的固执的人，他们能无畏地说出非某事某物不可的言论，他们能不想退路地一条路走到黑，他们能不顾外界的影响随自己的心而去。我想这才是学习乃至人生的真正方法。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;未来&quot;&gt;未来&lt;/h2&gt;

&lt;p&gt;大学算是过去一半了，在这个时候不免会担心未来。&lt;/p&gt;

&lt;p&gt;迷茫是一件好事情，那是有思考而有有选择的人的特权，但我想，能好好地做自己想做的事，过让自己感到快乐的日子，其实是很不错的。蓦直向前，不忘初心，那不是很好吗？&lt;/p&gt;

&lt;p&gt;2017.08.19 晚 于广州&lt;/p&gt;
</description>
        <pubDate>Sat, 19 Aug 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/08/19/post01/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/08/19/post01/</guid>
        
        <category>生活</category>
        
        <category>文艺</category>
        
        
      </item>
    
      <item>
        <title>玥</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;皓洁为月，佳文成玉。凤鸟神珠，寄吾德馨。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;二十年有二月记&quot;&gt;二十年有二月记&lt;/h2&gt;

&lt;p&gt;是年丁酉，余及冠，自取表字为玥，记于此。&lt;/p&gt;

&lt;p&gt;自民国新学盛起，气象变化，又及文革之乱，礼乐俱废。今举国崇尚数理，新学鼎盛，余逆潮流而行，复辟旧习，以缅古人，并规行自勉。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;大学&quot;&gt;大学&lt;/h2&gt;

&lt;p&gt;前不久经过中大北门的牌坊，才发现背面铭着的是“格致诚正 修齐治平”，此中深意，引我沉思。&lt;/p&gt;

&lt;p&gt;中大入学读《大学》，很多人会觉得不明所以，此大学与彼《大学》到底是同一个东西吗？&lt;/p&gt;

&lt;p&gt;所谓大学，和《大学》中的明德、亲民、止于至善是关联的。所谓大学，和《大学》中的格物、致知、诚意、正心、修身、齐家、治国、平天下是一致的。&lt;/p&gt;

&lt;p&gt;君子之志，不在名利。大丈夫理当以治国平天下为己任，而真正的大学，则是提供一条实现理想的道路。潜心学术研究，求学问道于先生学人，就是格物致知。在大学的生活、交往、锻炼，我们的通识课、我们听的讲座、我们谈论的一切，都是诚其意、正其心、修其身的过程。创业、工作则是齐家，齐家乃能安邦平天下。&lt;/p&gt;

&lt;p&gt;朱子借大学所讲的理，至今依旧受用。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;回忆往事兼论教育&quot;&gt;回忆往事兼论教育&lt;/h2&gt;

&lt;p&gt;再前不久经过磨碟沙，见到很久前的酒楼仍在，如今已落败了许多，令我想起一段往事。&lt;/p&gt;

&lt;p&gt;本欲在此记下，兼论今日对教育之思考，然而夜已深，昏昏欲睡，便就此搁笔，待他日记起再叙。&lt;/p&gt;

&lt;p&gt;2017.08.05 凌晨 于佛山&lt;/p&gt;
</description>
        <pubDate>Sun, 06 Aug 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/08/06/post01/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/08/06/post01/</guid>
        
        <category>生活</category>
        
        <category>文艺</category>
        
        
      </item>
    
      <item>
        <title>API调用研究</title>
        <description>&lt;h2 id=&quot;缘起&quot;&gt;缘起&lt;/h2&gt;

&lt;p&gt;有一段时间想从微博中获取数据，于是就向试一下用API获取数据。基于这个出发点，我学会了使用微博API，虽然并没有通过weiboAPI获得什么实际用到的数据。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;一管中窥豹&quot;&gt;一、管中窥豹&lt;/h2&gt;

&lt;p&gt;在使用API之前，我们有必要了解一下到底什么是API。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;API英文全称Application Programming Interface，即应用程序接口。接口（Interface ）指两个独立部分用于传递信息的共同边界（a shared boundary across which two separate components of a computer system exchange information，from Wikipedia）。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;所谓接口，就像USB插口一样，插上去就能传递信息。API就是提供给应用程序使用的接口，应用程序通过这个接口就可以简单地获取信息，而不需要知道底层代码或工作机制等细节，就像我们使用移动硬盘时只需要知道怎么将USB插口接到电脑上而不需要知道计算机是怎样实现从硬盘拷贝数据的。&lt;/p&gt;

&lt;p&gt;这样的好处就是，我们获取数据时，早已有了预先定义好的通道，数据提供方已经将访问数据的方法打包好，我们直接用就可以了，不用担心到底是怎么访问数据的——这些琐事就交给新浪吧。当然，API也不只是用于获取数据，还能用于发送数据，即接口的传输可以是双向的。比如我们通过调用新浪微博的API不仅可以获取最新的微博消息，还能通过接口发布一则微博或评论。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;二牛刀小试&quot;&gt;二、牛刀小试&lt;/h2&gt;

&lt;p&gt;既然API是现成的数据获取渠道，那么调用方式也应该被精心设计，所以接口的调用应该是相对人性化的，也就是说对于要获取数据的一般用户，并不需要太深奥的知识都能使用，那么怎么调用API呢？&lt;/p&gt;

&lt;p&gt;以下以新浪微博API为例初探如何调用API。&lt;/p&gt;

&lt;p&gt;首先我们可以很容易找到&lt;a href=&quot;http://open.weibo.com/wiki/API&quot;&gt;新浪微博的API&lt;/a&gt;，里面有各种各样的接口（如图-1）。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072901/pic01.jpg&quot; alt=&quot;图 - 1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们先从“获取最新的公共微博”开始，点入左边的链接&lt;a href=&quot;http://open.weibo.com/wiki/2/statuses/public_timeline&quot;&gt;statuses/public_timeline&lt;/a&gt;，可以看到里面有许多项内容——URL、支持格式、请求方式、是否需要登录等等（如图-2）。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072901/pic02.jpg&quot; alt=&quot;图 - 2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;从这里我们可以知道这个接口调用要注意的东西，但现在我们似乎还看不懂，没关系我们，先把他放在一边，回到最初的问题上：如何调用API。&lt;/p&gt;

&lt;p&gt;要知道如何调用，首先我们我知道在哪调用，这里采用一种简洁的语言——Python来调用我们API，如果不会Python也没关系，事实上你只要学会运行一个python程序就可以调用API了。&lt;/p&gt;

&lt;h4 id=&quot;1-调用环境的搭建&quot;&gt;1. 调用环境的搭建&lt;/h4&gt;

&lt;p&gt;搭建调用环境听起来很高端，其实说白了就是装软件和设置的过程。&lt;/p&gt;

&lt;h6 id=&quot;-python的运行&quot;&gt;* Python的运行&lt;/h6&gt;

&lt;h6 id=&quot;-sdk的获取&quot;&gt;* SDK的获取&lt;/h6&gt;

&lt;p&gt;SDK即软件开发工具包（Software Development Kit），为了方便调用API，sina提供了各种语言下调用API的SDK，具体参见网站&lt;a href=&quot;http://open.weibo.com/wiki/SDK&quot;&gt;Weibo SDK&lt;/a&gt;。其中python的SDK是由大神廖雪峰&lt;a href=&quot;https://github.com/michaelliao&quot;&gt;github&lt;/a&gt;写的，他的git上也有一些python教程。关于SDK，可以戳：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;下载页&lt;a href=&quot;https://github.com/michaelliao/sinaweibopy&quot;&gt;新浪微博Python SDK&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;介绍页&lt;a href=&quot;http://github.liaoxuefeng.com/sinaweibopy/&quot;&gt;sinaweibopy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h6 id=&quot;-创建应用&quot;&gt;* 创建应用&lt;/h6&gt;

&lt;p&gt;我们要调用数据，数据提供者必然不能随便开放数据，在新浪微博API中，要获取数据，就需要app-key和app-secret。这两个东西就像是账号密码，用来证明你是开发者，通过你开发的这个应用来使用API。&lt;/p&gt;

&lt;p&gt;要获得app-key和app-secret，我们首先要有一个app-，我们在&lt;a href=&quot;http://open.weibo.com/&quot;&gt;新浪开发平台&lt;/a&gt;上创建一个应用，点击我的应用，然后认证信息后，点击微连接-其他，创建一个网页应用，不需要审核。&lt;/p&gt;

&lt;p&gt;然后在【应用信息-基本信息】里面的app-key和app-secret（如图-3）。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072901/pic03.png&quot; alt=&quot;图 - 3&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在【应用信息-高级信息】里面【OAuth2.0授权设置】（如图-4）里输入回调地址，这个地址是授权后跳转的页面，你可以自己做一个网页作为回调页，也可以随便找一个网页作为回调页，图中我用的是我自己做的一个简易页面。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072901/pic04.png&quot; alt=&quot;图 - 4&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;2-尝试调用&quot;&gt;2. 尝试调用&lt;/h4&gt;

&lt;p&gt;在任意路径新建一个文件夹作为代码存储区，也作为我们的工作环境。&lt;/p&gt;

&lt;p&gt;将SDK里的文件复制进该文件夹中。&lt;/p&gt;

&lt;p&gt;新建一个文本文档，命名随意但后缀要为.py，我们将通过这个文件来调用API，注意创建的文档要是纯文本文档。&lt;/p&gt;

&lt;p&gt;然后在文档中粘贴以下代码（&lt;a href=&quot;https://github.com/codeRimoe/api/blob/master/weiboAPI/apicode/demo1_pub_timeline.py&quot;&gt;demo1_pub_timeline.py&lt;/a&gt;），我们试着用下面这段代码来扒一些简单的数据吧。&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# _*_ coding: utf-8 _*_&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;weibo&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;webbrowser&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;reload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                                                  &lt;span class=&quot;c&quot;&gt;#使用UTF-8输出&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setdefaultencoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'utf-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;APP_KEY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'xxx'&lt;/span&gt;             &lt;span class=&quot;c&quot;&gt;#将引号中的xxx替换为你的APP_KEY，保留引号&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MY_APP_SECRET&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'yyy'&lt;/span&gt;       &lt;span class=&quot;c&quot;&gt;#将引号中的yyy替换为你的APP_SECRET，保留引号&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;REDIRECT_URL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'zzz'&lt;/span&gt;        &lt;span class=&quot;c&quot;&gt;#将引号中的zzz替换为你的回调地址，保留引号&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#请求用户授权的过程&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weibo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;APIClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;APP_KEY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MY_APP_SECRET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;             &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;authorize_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_authorize_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;REDIRECT_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;       &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#自动打开浏览器，授权后复制地址栏中URL里的code字段&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;webbrowser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authorize_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                               &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#将code字段后的值复制输入&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;raw_input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;input the code: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;                 &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#获得用户授权&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request_access_token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;REDIRECT_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#保存返回的access_token,exires_in,uid&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;access_token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;access_token&lt;/span&gt;                          &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;expires_in&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expires_in&lt;/span&gt;                              &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;uid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uid&lt;/span&gt;                                            &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#设置accsess_token&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_access_token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;access_token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expires_in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;            &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#调用API&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statuses__public_timeline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'statuses'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;     &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;-----------the results is : &quot;&lt;/span&gt;                         &lt;span class=&quot;c&quot;&gt;#输出信息&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                                        &lt;span class=&quot;c&quot;&gt;#确定获取的信息条数&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'昵称：'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'user'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'screen_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;' 来自：'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'user'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'location'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'时间：'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'created_at'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'来源：'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'source'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'微博：'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'text'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'转发：'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'reposts_count'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;' 评论：'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'comments_count'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;' 喜欢：'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'attitudes_count'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;-----------all--------------&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;在运行这段代码之前，我们要先将app-key和app-secret放进代码中，这样新浪微博才知道谁要调用这些数据。当然我们也要把回调地址写上，注意要和上面创建APP时你填的地址一样。&lt;/p&gt;

&lt;p&gt;然后我们在终端中运行这段代码。如无意外，代码运行后，终端会提示输入code，同时浏览器会打开，然后会出现授权提示页面（如图-5）。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072901/pic05.png&quot; alt=&quot;图 - 5&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这是选择授权就会跳转到授权提示页面，我们需要将跳转后的URL地址中的“code=”后面的部分复制，输入到终端中（如图-6）。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072901/pic06.png&quot; alt=&quot;图 - 6&quot; /&gt;&lt;/p&gt;

&lt;p&gt;然后我们就能看到终端上显示出了我们扒下来的数据(可以写文件保存：&lt;a href=&quot;https://github.com/codeRimoe/api/tree/master/weiboAPI/result_example&quot;&gt;result.txt&lt;/a&gt;)啦（如图-7）！&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072901/pic07.jpg&quot; alt=&quot;图 - 7&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;三更上层楼&quot;&gt;三、更上层楼&lt;/h2&gt;

&lt;p&gt;API实质上是访问网站数据库的窗口，我们递交一个申请，网站返回数据，API和爬虫不同，爬虫是模拟人访问网页的行为获取网页，然后在获取的网页上提取数据，并通过网页的链接跳转继续获取数据，而API则是向服务器发送请求，服务器返回json格式的文件。所以API其实是官方提供的数据获取源。通常会对数据流量有一定的限制。&lt;/p&gt;

&lt;p&gt;因此API调用的本质是：发送请求-&amp;gt;返回数据-&amp;gt;解析数据&lt;/p&gt;

&lt;h4 id=&quot;1-http请求&quot;&gt;1. HTTP请求&lt;/h4&gt;

&lt;p&gt;首先我们要发送的请求是通过HTTP进行请求的，HTTP的请求方式有几种：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP1.0定义了三种请求方法： GET, POST 和 HEAD方法。&lt;/li&gt;
  &lt;li&gt;HTTP1.1新增了五种请求方法：OPTIONS, PUT, DELETE, TRACE 和 CONNECT 方法。&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;方法&lt;/td&gt;
      &lt;td&gt;描述&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;GET&lt;/td&gt;
      &lt;td&gt;请求指定的页面信息，并返回实体主体。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;HEAD&lt;/td&gt;
      &lt;td&gt;类似于get请求，只不过返回的响应中没有具体的内容，用于获取报头。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;POST&lt;/td&gt;
      &lt;td&gt;向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;PUT&lt;/td&gt;
      &lt;td&gt;从客户端向服务器传送的数据取代指定的文档的内容。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;DELETE&lt;/td&gt;
      &lt;td&gt;请求服务器删除指定的页面。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;CONNECT&lt;/td&gt;
      &lt;td&gt;HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;OPTIONS&lt;/td&gt;
      &lt;td&gt;允许客户端查看服务器的性能。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;TRACE&lt;/td&gt;
      &lt;td&gt;回显服务器收到的请求，主要用于测试或诊断。&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;一般用到的就只有GET和POST，区别大概是GET用于获取数据，POST要在header中提交更多的参数用于提交数据。我们浏览网页，实际上是提交一个表单，向服务器请求数据。关于http协议的教程，具体可以看&lt;a href=&quot;http://www.runoob.com/http/http-tutorial.html&quot;&gt;HTTP教程&lt;/a&gt;，具体请求方式python中一般是使用urllib和urllib2两个模块的urlopen()函数。&lt;/p&gt;

&lt;p&gt;我们在微博API的使用手册中可以看到，每个API都有写明HTTP请求方式，使用SDK可以不需要深入了解HTTP请求方式即可调用API。&lt;/p&gt;

&lt;h4 id=&quot;2-oauth授权简介&quot;&gt;2. OAuth授权简介&lt;/h4&gt;

&lt;blockquote&gt;
  &lt;p&gt;OAuth是一个关于授权(authorization)的开放网络标准,在全世界得到广泛应用,目前的版本是2.0版。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;新浪微博API采用OAuth2.0授权，具体原理可以参考&lt;a href=&quot;http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html&quot;&gt;理解OAuth 2.0&lt;/a&gt;，这里我们只需要知道通过授权码认证后，我们的程序可以获得用户账号的某些权限，比如查看微博、发微博等。这个授权码，其实就是上文提到“code=”后面的那串字符。&lt;/p&gt;

&lt;h4 id=&quot;3-使用sdk&quot;&gt;3. 使用SDK&lt;/h4&gt;

&lt;p&gt;使用SDK很方便的一点就是可以不用管这些，直接就使用SDK（weiboAPI模块）里的函数。&lt;/p&gt;

&lt;p&gt;上文demo.py中调用了几个函数:&lt;/p&gt;

&lt;p&gt;其中client.get_authorize_url()函数可以返回授权页；&lt;/p&gt;

&lt;p&gt;client.request_access_token()用于获得包括access_token的返回数据；&lt;/p&gt;

&lt;p&gt;使用client.set_access_token()函数设置access_token后就可以调用API了。&lt;/p&gt;

&lt;p&gt;API接口有很多，demo中调用的是公众时间流，可以获取公共微博数据。这些接口的调用方式在微博开放平台-&lt;a href=&quot;http://open.weibo.com/wiki/%E5%BE%AE%E5%8D%9AAPI&quot;&gt;微博API&lt;/a&gt;中可以找到。&lt;/p&gt;

&lt;p&gt;比如当前用户关注的人的最新微博的API&lt;a href=&quot;http://open.weibo.com/wiki/2/statuses/home_timeline&quot;&gt;statuses/home_timeline&lt;/a&gt;其URL是”https://api.weibo.com/2/statuses/home_timeline.json”，调用就可以直接使用如下方法，其实就是把“/”换成“.”，然后后面加上请求方式（.get/.post）。&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statuses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;home_timeline&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;如果要调用某些API需要提交请求参数的，那就在括号里面加上参数名=具体参数，如&lt;a href=&quot;http://open.weibo.com/wiki/2/comments/create&quot;&gt;comments/create&lt;/a&gt;（这个API是POST请求方式,请求参数如图-8），那就应该写成如下形式。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072901/pic08.png&quot; alt=&quot;图 - 8&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comments&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;你好帅啊！&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4129569084024445&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;调用后结果如下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072901/pic09.png&quot; alt=&quot;图 - 9&quot; /&gt;&lt;/p&gt;

&lt;p&gt;用API发条评论也是很有趣的嘛～&lt;/p&gt;

&lt;h4 id=&quot;4-访问频次&quot;&gt;4. 访问频次&lt;/h4&gt;

&lt;p&gt;API接口不是无限次数访问的，官方文档-&lt;a href=&quot;http://open.weibo.com/wiki/Rate-limiting&quot;&gt;接口访问频次权限&lt;/a&gt;这样写道：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;微博开放接口限制每段时间只能请求一定的次数。限制的单位时间有每小时、每天；限制的维度有单授权用户和单IP；部分特殊接口有单独的请求次数限制。例如：&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;一个应用内单授权用户每小时只能请求微博开放接口n次；&lt;/li&gt;
    &lt;li&gt;一个应用内单授权用户每天累计只能请求微博开放接口m次；&lt;/li&gt;
    &lt;li&gt;一个IP地址每小时只能请求微博开放接口x次；&lt;/li&gt;
    &lt;li&gt;发微博接口单授权用户每小时只能请求y次；
其中n、m、x、y的具体数值，微博开放平台将采用应用质量评估系统，实现智能评估应用质量，质量高的应用相应的这些数值就高，也就是请求限制小。因此限制值不固定，不同的应用有不同的限制，取决于应用自身的质量。&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;使用API接口&lt;a href=&quot;http://open.weibo.com/wiki/2/account/rate_limit_status&quot;&gt;account/rate_limit_status&lt;/a&gt;，可以查看当前应用的频次限制。&lt;/p&gt;

&lt;h4 id=&quot;5-自动获取授权码&quot;&gt;5. 自动获取授权码&lt;/h4&gt;

&lt;p&gt;这部分由于各种原因没有去研究，以后不知道什么时候才有空去研究，这里先贴一个链接：&lt;a href=&quot;http://blog.csdn.net/liujiandu101/article/details/52096654&quot;&gt;python模拟登录新浪微博自动获得调用新浪api所需的code&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;大概看了一下好像就是直接用requests请求的。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;四返躬内省&quot;&gt;四、返躬内省&lt;/h2&gt;

&lt;p&gt;一开始研究API是为了通过API获取微博的数据，但后来发现，API对频次的限制比较严格，而且获取的方法比较单一，后来就转向使用爬虫。但如果要获取用户间的关系的话，使用API似乎也是可行的。&lt;/p&gt;

&lt;p&gt;API的用途更多是用在应用接入方面，比如用在我们用某些软件或网页中的“分享到新浪微博”的接口，还是有其作用的。&lt;/p&gt;

&lt;p&gt;另外新浪微博的API和twitter的API是很像的，《社交网站的数据挖掘与分析》第一章讲的就是twitte的API使用方法，大家有空可以看看。&lt;/p&gt;

&lt;p&gt;其实这篇文章大约半年前就开始写了，最近才将之前的东西整理了一下，接下来我会写几篇关于上学期学习简单爬虫的艰苦历程，可能还会研究一下百度地图的API，不过不知道什么时候才能写出来。&lt;/p&gt;

&lt;p&gt;代码已发到&lt;a href=&quot;https://github.com/codeRimoe/api&quot;&gt;Github - api&lt;/a&gt;，保留一切权利。&lt;/p&gt;

&lt;p&gt;代码参考自：&lt;a href=&quot;http://blog.csdn.net/dijason/article/details/8251322&quot;&gt;微博 获取指定用户发表的所有微博&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2017.07.27 于广州&lt;/p&gt;
</description>
        <pubDate>Sat, 29 Jul 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/07/29/post01/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/07/29/post01/</guid>
        
        <category>Python</category>
        
        <category>API/SDK</category>
        
        <category>数据获取</category>
        
        <category>技术</category>
        
        <category>微博</category>
        
        
      </item>
    
      <item>
        <title>大概是最弱鸡的2D仿真</title>
        <description>&lt;h2 id=&quot;缘起&quot;&gt;缘起&lt;/h2&gt;

&lt;p&gt;大二下学期的基础课特别多，大作业也特别多，就在几周前，我在大作业与考试复习的夹缝里顽强地生存。&lt;/p&gt;

&lt;p&gt;大概是一个模拟草原上狼吃羊的过程，要求C++语言，使用OOP思想，使用图像可视化。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;实验过程&quot;&gt;实验过程&lt;/h2&gt;

&lt;p&gt;具体的实验报告可以在&lt;a href=&quot;https://github.com/codeRimoe/Wolf_and_Sheep&quot;&gt;GitHub - Wolf and Sheep&lt;/a&gt;上看，这里就不多叙述惹。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072701/pic01.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;狼和羊的人工智障&quot;&gt;狼和羊的人工智障&lt;/h2&gt;

&lt;p&gt;比原来的要求增加了一些东西，优化的移动策略：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;狼会往狼多的方向移动&lt;/li&gt;
  &lt;li&gt;羊会往远离追逐他的狼的方向逃跑，往狼少的地方移动&lt;/li&gt;
  &lt;li&gt;繁殖时会为出生的宝宝选择最佳出生位置&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;实现方法非常简单，其实就是计算权重，也就是提供了一个决策方案的实现思路，越优先的考虑节点的权重乘以越高的位置。原理相当于设计一个函数计算优先度，我们考虑问题往往会一层一层的考虑比较（类似于决策树）。&lt;/p&gt;

&lt;p&gt;如下图，羊首先考虑有没有狼在身边，一步就能吃掉自己，其次考虑移动后附近狼的数目多少，最后考虑移动后的草的数量。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072701/pic02.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;因为活命永远是最重要的，所以首先不要逃离最接近的狼，然后再长远考虑移动后的情况。最后权重计算公式是W=A&lt;em&gt;w1+B&lt;/em&gt;w2+C*w3，这里的为w1、w2、w3参数是可以变化的，具体要视情况而定，这个线性模拟策略参数设置可以考虑通过神经网络模型等得出。当然这里保证A、B、C小于10，将参数w1、w2、w3分别设为100、10、1，就可以得到一种简单的模拟方式：就是先比较A，再比较B，再比较C，只要策略一的A比策略二的大，就不考虑BC的值。&lt;/p&gt;

&lt;p&gt;这部分也不是本文重点，就此略过。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;可视化qt&quot;&gt;可视化（QT）&lt;/h2&gt;

&lt;p&gt;最后我选择QT进行可视化，其中一个原因是QT是开源的，最重要的原因是跨平台，对于使用MacOS的我来说，写作业给老师比较烦就是老师用的是Windows，好多库都是不一样的。QT可以跨三个平台，大概有点不好的就是UI文件会有点错位，不过关系不大。&lt;/p&gt;

&lt;p&gt;QT是一个可视化架构，通过QT可以很容易做出一些比较好看耐用的交互界面。而QT creator则是一个配套的IDE。&lt;/p&gt;

&lt;p&gt;QT简介请看：&lt;a href=&quot;http://blog.csdn.net/xuancailinggan/article/details/50620829&quot;&gt;关于QT、QT creator和编译器，新手入门必知的一些知识&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072701/pic03.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;1-qt的安装与配置&quot;&gt;1. QT的安装与配置&lt;/h4&gt;

&lt;p&gt;对于MacOS来说，下载一个QT Creater，这是一个大概是IDE的东西。感觉Mac版的话要自己配置Qt版本，之前我搞了好久都不行。建议安装编译器的时候用brew安装，&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew update
brew install qt
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;安装成功后然后终端会提示安装的路径（大概是/usr/local/Cellar/qt/5.9.0），然后在Qt Creator中设置版本（偏好设置-&amp;gt;构建与运行-&amp;gt;Qt Version-&amp;gt;添加…）。这里最坑的是Mac的打开文件窗口不能直接访问系统保护的目录，这里有几个方法，一是直接Command+Shift+G，输入路径，二是前往文件夹或者终端cd路径，然后创建个快捷方式（替身），然后通过替身跳到文件夹。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072701/pic04.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072701/pic05.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;配置完就可以使用了，左下角有个类似资源管理器的东西，选“项目”里面会有工程文件的Source和资源文件等。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072701/pic06.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;然后旁边可以选择编译器、release、debug、build。&lt;/p&gt;

&lt;p&gt;在Windows下的安装就傻瓜得多了，大概就是一个引导程序，比较傻瓜的装好就OK。编译器建议只选MingW的就够了。&lt;/p&gt;

&lt;h4 id=&quot;2-qt的控件对象&quot;&gt;2. QT的控件对象&lt;/h4&gt;

&lt;p&gt;QT的工程文件是.pro，项目的文件框架如下图所示。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072701/pic07.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Headers和Source是头文件和源文件，一般就是cpp实现的Source，Form是.ui文件，大概就是初始界面的框架。Resources是资源文件，一些图片一般放在里面用于调取。&lt;/p&gt;

&lt;p&gt;.ui文件可以在“设计“模式（designer）中直接画出窗口相应的框架，这个有点像VB，如下图所示。这里指出在windows下里面的控件对象会错位。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072701/pic08.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;操纵窗口是通过工程创建的一个类MainWindow实现的。该类相当于是一个窗口，包含一个指针成员ui，调用窗口的预先绘制好控件对象时，使用ui-&amp;gt;ObjName作为对象名使用，尤其菜单栏，状态栏等就更应该如此。&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;ui&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mainToolBar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setFixedHeight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//设置工具栏高度为10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;当然，还可以自己创建控件对象，为了方便调用自己创建的对象，一般在MainWindow类中会创建一个指针成员，用于记录该对象。&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;QTimer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;//创建一个QTimer，之后可以使用timer来调用该对象
&lt;/span&gt;&lt;span class=&quot;cm&quot;&gt;/* ----------------- */&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;               &lt;span class=&quot;c1&quot;&gt;//一般在析构函数中会调用delete删除对象
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;简而言之，QT是通过控制控件对象完成界面操作的。&lt;/p&gt;

&lt;h4 id=&quot;3-qt的资源库&quot;&gt;3. QT的资源库&lt;/h4&gt;

&lt;p&gt;前面说到QT的resources文件夹用于存放资源，比如图片素材这类东西就可以放在里面，以备调用。&lt;/p&gt;

&lt;p&gt;在右下角文件管理器中选项目，Resources文件夹右键-添加新文件，创建一个.qrc文件，然后往.qrc文件中添加资源，自后就可以调用其中的资源了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072701/pic09.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017072701/pic10.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;QImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;:/jpg/resource/green.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;//从资源库调取文件green.png
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pLabel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setPixmap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;QPixmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fromImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//在QLabel中显示图片
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;4-qt的信号-槽机制&quot;&gt;4. QT的信号-槽机制&lt;/h4&gt;

&lt;p&gt;信号与槽是QT的两个重要概念，两者可以将不同对象联系起来，使程序更安全简洁。&lt;/p&gt;

&lt;p&gt;信号指的是对象发出的触发指令，槽则是接受信号并触发的函数，两者以connect函数连接起来。&lt;/p&gt;

&lt;p&gt;可以参考文章&lt;a href=&quot;http://www.cnblogs.com/MuyouSome/p/3515941.html&quot;&gt;Qt入门之信号与槽机制&lt;/a&gt;。&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MainWindow&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;QMainWindow&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Q_OBJECT&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;explicit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MainWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;QWidget&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MainWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//other code...
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;slots&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//槽函数必须要在类的public/private/protected slots中声明，否则无法使用
&lt;/span&gt;    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//语法：connect(sender, SIGNAL(signal), receiver, SLOT(slot));
&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pushButton1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SIGNAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SLOT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()));&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pushButton2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SIGNAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SLOT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;5-qt的编译打包&quot;&gt;5. QT的编译打包&lt;/h4&gt;

&lt;p&gt;release编译后，将.exe文件提取出来，用Qt命令行使用windeployqt来拷贝依赖包即可发布。&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;windeployqt Programme.exe
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;命令自动会将程序需要的第三方库（.dll文件）复制到.exe文件的的路径中。&lt;/p&gt;

&lt;p&gt;在Mac下生成的app文件，也可以用macdeployqt来进行依赖库拷贝。&lt;/p&gt;

&lt;p&gt;具体可以参考：&lt;a href=&quot;http://blog.csdn.net/liuyez123/article/details/50462637&quot;&gt;Qt 程序打包发布总结&lt;/a&gt;。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;后记&quot;&gt;后记&lt;/h2&gt;

&lt;p&gt;做这个课程作业最大的收获大概就是接触到QT，可以将一些小程序可视化，能够做出一个界面，这个过程也是挺有趣的。&lt;/p&gt;

&lt;p&gt;代码已发到&lt;a href=&quot;https://github.com/codeRimoe/h5_game_kanna&quot;&gt;Github - h5_game_kanna&lt;/a&gt;，保留一切权利。&lt;/p&gt;

&lt;p&gt;2017.07.27 于广州&lt;/p&gt;
</description>
        <pubDate>Thu, 27 Jul 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/07/27/post01/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/07/27/post01/</guid>
        
        <category>C/C++</category>
        
        <category>QT</category>
        
        <category>可视化</category>
        
        <category>仿真</category>
        
        <category>技术</category>
        
        
      </item>
    
      <item>
        <title>胡乱写了个小游戏</title>
        <description>&lt;h2 id=&quot;缘起&quot;&gt;缘起&lt;/h2&gt;

&lt;p&gt;H5通识课作业要求写一个小游戏，那就写吧，5月30日晚从香港回到学校，就开始着手撸起来。&lt;/p&gt;

&lt;p&gt;本来想做一个像机械迷城一样的H5游戏，但想想工程量太大赶不及交作业，而且最近事还不少，于是就想着做一个简单一点的。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;游戏设计&quot;&gt;游戏设计&lt;/h2&gt;

&lt;p&gt;因为没有想法，所以上网找了一下别人blog的文章，于是发现了一篇2011年的文章&lt;a href=&quot;http://www.lostdecadegames.com/how-to-make-a-simple-html5-canvas-game/&quot;&gt;《How to make a simple HTML5 Canvas game》&lt;/a&gt;，这也是有够古老的，但足够简单。&lt;/p&gt;

&lt;p&gt;但是只是上下左右吃小妖怪这样的设定既不有趣也不可爱，而且也不可能直接copy别人的代码交作业。&lt;/p&gt;

&lt;p&gt;所以结合以前玩过的一个叫泡泡堂的游戏来了灵感，设计了一个小游戏。&lt;/p&gt;

&lt;p&gt;·玩家通过控制一个角色单位的【移动】和【放炸弹】来躲避并消灭怪物。&lt;/p&gt;

&lt;p&gt;·怪物定时产生，跟随玩家角色移动，碰到玩家角色即消失，玩家扣血。&lt;/p&gt;

&lt;p&gt;·胜利条件是杀敌数一定或一定时间内不死。&lt;/p&gt;

&lt;p&gt;·当然怪物、炸弹可以有不同类型和效果。&lt;/p&gt;

&lt;p&gt;然后为了变得萌萌哒就把游戏做成《小林家的龙女仆》的同人啦。&lt;/p&gt;

&lt;p&gt;设定是托尔追坎娜，后来又加上一个不动的小林在中间，游戏中不能碰到。&lt;/p&gt;

&lt;p&gt;（有人问我为什么是坎娜不是康娜，其实就是单纯喜欢这个小众的译名（误）。）&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017060901/pic01.jpg&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;构建对象与移动&quot;&gt;构建对象与移动&lt;/h2&gt;

&lt;p&gt;说干就干，首先要构建对象，先构建了三个对象，一是坎娜，二是托尔，三是炸弹。后来又加了个小林类。&lt;/p&gt;

&lt;p&gt;基本上都有img、x、y、hp这三个数据成员，其实可以搞个基类的，不过当时有点赶着写完于是就直接撸没有设计类。&lt;/p&gt;

&lt;p&gt;类图大概是下面这样的。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017060901/pic02.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;画图、移动、设置炸弹，另外写了几个检查状态的函数。&lt;/p&gt;

&lt;p&gt;键盘输入控制的话，当然是用键盘的上下左右啦，其实这个也只是设置一个监听。&lt;/p&gt;

&lt;p&gt;代码如下&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;c1&quot;&gt;//监听键盘事件&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keysDown&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{};&lt;/span&gt;                                     &lt;span class=&quot;c1&quot;&gt;//记录当前按着的键&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;keydown&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;keysDown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;keyCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;keyup&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keysDown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;keyCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;keyCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/*add key value*/&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/*add code*/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;//松开某键盘执行代码&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/*add key value*/&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/*add code*/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//检测长按对应事件&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;Kanna&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;prototype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;move&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//使用（value in dictionary）判断&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;38&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keysDown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;spd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keysDown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;spd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;37&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keysDown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;spd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keysDown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;spd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CBH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CBH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CBW&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CBW&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;kanna&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;kanna&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;kimg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;kanna&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;kimg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;其他的话就是托尔跟踪的函数了，算法大概就是每次算出xy差值，然后得到连线斜率，然后用速度算一下移动的xy值。&lt;/p&gt;

&lt;p&gt;游戏实现方面还是比较简单的。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;手机端支持g感应&quot;&gt;手机端支持（G感应）&lt;/h2&gt;

&lt;p&gt;本来只做PC端就能交作业了，但我突然觉得h5不做手机端这游戏发在票圈里肯定没人玩了，于是我就开始研究手机端了。&lt;/p&gt;

&lt;p&gt;第一个问题首先是如何检测网页在手机端打开，为了图方便就直接用了别人的库&lt;a href=&quot;https://github.com/matthewhudson/device.js/blob/master/lib/device.js&quot;&gt;Device.js&lt;/a&gt;,然后就直接用device.mobile()判断就OK了。&lt;/p&gt;

&lt;p&gt;然后控制的话当然是触摸画板放炸弹了，很简单就直接加一个object.onclick()就可以了，不过这里mark一下，canvas是不能直接onclick的，我们要造一个div然后get这个div再div.onclick()。&lt;/p&gt;

&lt;p&gt;至于移动的话，我先是想用触摸canvas外的空白处，但一是不好实现，二是用户不好操作，三是竖屏状态下自适应后没有空白了，后来我就想到G感应。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017060901/pic03.jpg&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;首先我去找了些文章，比较有参考价值的是&lt;a href=&quot;http://blog.csdn.net/hursing/article/details/9046837&quot;&gt;iOS Safari/WebKit对DeviceOrientationEvent的实现&lt;/a&gt;。其实准确来说，用的应该是陀螺仪。手机有加速度感应和陀螺仪两个传感器，前者感应手机的加速度，后者感应手机旋转角度，参考自&lt;a href=&quot;http://www.haorooms.com/post/html5_DeviceMotionEvent&quot;&gt;html5重力感应事件之DeviceMotionEvent&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;陀螺仪的监听器是”deviceorientation”，监听手机的转动，即手机一转动就触发监听。返回5个值：webkitCompassHeading，webkitCompassAccuracy，alpha，beta，gamma。&lt;/p&gt;

&lt;p&gt;webkitCompassHeading：与正北方向的角度差值。正北为0度，正东为90度，正南为180度，正西为270度。&lt;/p&gt;

&lt;p&gt;webkitCompassAccuracy：指北针的精确度，表示偏差为正负多少度。一般是10。&lt;/p&gt;

&lt;p&gt;alpha: 在围绕 z 轴旋转时，手机屏幕面转过的度数，设备顶部指向地球正北方向时为0，取值[0,360]。&lt;/p&gt;

&lt;p&gt;beta: 在围绕 x 轴旋转时，手机屏幕面转过的度数，设备水平放置时为0，取值[-180,180]。&lt;/p&gt;

&lt;p&gt;gamma: 在围绕 y 轴旋转时），手机屏幕面转过的度数，设备水平放置时为0，取值[-90,90]。&lt;/p&gt;

&lt;p&gt;具体的直观感受请就看下图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017060901/pic04.png&quot; alt=&quot;avatar&quot; /&gt;
&lt;img src=&quot;/img/in-post/2017060901/pic05.png&quot; alt=&quot;avatar&quot; /&gt;
&lt;img src=&quot;/img/in-post/2017060901/pic06.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们可以发现这里的原理很简单，大概是：通过正北（地磁场感应）判断alpha，通过重力加速度方向（重力感应）确定beta和gamma。&lt;/p&gt;

&lt;p&gt;我们这里只用到beta和gamma，也就是说所谓的G感应其实是陀螺仪的两个返回值。&lt;/p&gt;

&lt;p&gt;所以每当监听到转动时就往keysdown字典里添加对应方向的keycode，检测到轴线水平时删除该轴线上两个方向的keycode。当然，我设置了允许5度以内的偏差，就是返回正负5度都认为是水平。&lt;/p&gt;

&lt;p&gt;此外要注意横屏时的方向和竖屏的不一样，利用window.orientation可以返回-90、0、90、180分别代表屏幕四个方向。&lt;/p&gt;

&lt;p&gt;手机端测试时比较麻烦的是要先推到网站上再用手机打开，开始以为chrome的设备模拟不支持GSencor，后来发现是有Sencor模拟的。
&lt;img src=&quot;/img/in-post/2017060901/pic07.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;另外我还发现chrome有remote devices功能，可以用USB连上手机，这次没用上，下次可以探索一下。
&lt;img src=&quot;/img/in-post/2017060901/pic08.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;网页自适应&quot;&gt;网页自适应&lt;/h2&gt;

&lt;p&gt;网页自适应对我来说一直挺麻烦的，可能是因为CSS和Style没学好，其实个人觉得吧，CSS写错了都不知道哪出问题，颇为心累。&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;坎娜与托尔 - Rimoe Game&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;user-scalable=0&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;viewport&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;style&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;98%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;98%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;flex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;justify-content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;center&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;align-items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;center&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;   
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;这里mark一下meta里面的user-scalable=0，这样的话可以避免双击放大，在游戏中就很好地避免狂点屏幕放大网页的问题。&lt;/p&gt;

&lt;p&gt;限时设置html和body的宽高98%，避免100%时出现滚动条，然后我用js控制缩放，直接修改div.style.zoom（缩放）。&lt;/p&gt;

&lt;p&gt;因为canvas一开始就设置好宽高多少px，如果后面改的话其他图片大小什么的也要改，所以直接采用缩放的办法。用document.body.clientWidth和Height获取宽高，求其与画板的比值作为缩放尺度。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;后记&quot;&gt;后记&lt;/h2&gt;

&lt;p&gt;随便撸了个小游戏成就感还是很足的，H5和JS开发还是挺有趣的，最重要的是网页作为现在最重要的信息载体，是最值的关注的内容，个人觉得JS是挺有学习的意义的，易上手还好看，与C、Jave那些不一样，容易装逼。&lt;/p&gt;

&lt;p&gt;不过这次的代码写的并不完美，挺混乱的。&lt;/p&gt;

&lt;p&gt;嗯，本人的H5学习之路还要任重道远呢。&lt;/p&gt;

&lt;p&gt;代码已发到&lt;a href=&quot;https://github.com/codeRimoe/h5_game_kanna&quot;&gt;Github - h5_game_kanna&lt;/a&gt;，保留一切权利。&lt;/p&gt;

&lt;p&gt;2017.06.09 于珠海&lt;/p&gt;
</description>
        <pubDate>Fri, 09 Jun 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/06/09/post01/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/06/09/post01/</guid>
        
        <category>H5/JS</category>
        
        <category>游戏</category>
        
        <category>技术</category>
        
        
      </item>
    
      <item>
        <title>为政之学与入徳之门</title>
        <description>&lt;h2 id=&quot;本文缘起&quot;&gt;本文缘起&lt;/h2&gt;

&lt;p&gt;本学期选了一门通识课，《礼记》导读，因交作业作了一篇文章，遂记录于此。&lt;/p&gt;

&lt;p&gt;原文题为《〈四书·大学〉与〈礼记·大学〉之异》，本文在原文上有作修改。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;两版本大学之异&quot;&gt;两版本大学之异&lt;/h2&gt;

&lt;p&gt;目前《大学》主要有两个版本，一是&lt;a href=&quot;https://zh.wikisource.org/wiki/%E7%A6%AE%E8%A8%98%E6%AD%A3%E7%BE%A9/60&quot;&gt;《礼记·大学》&lt;/a&gt;，二是&lt;a href=&quot;https://zh.wikisource.org/wiki/%E5%9B%9B%E6%9B%B8%E7%AB%A0%E5%8F%A5%E9%9B%86%E8%A8%BB/%E5%A4%A7%E5%AD%B8%E7%AB%A0%E5%8F%A5&quot;&gt;《四书·大学》&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;此处《礼记·大学》即《礼记·大学第四十二》原文，《四书·大学》是南宋朱熹的《四书章句集注·大学章句集注》。二者有许多不同，如在篇目顺序上，《四书·礼记》经过朱子的移文补传，体系更为严谨。&lt;/p&gt;

&lt;p&gt;《礼记·大学》可以分为“道”、“诚意篇”、“正心篇”、“修身篇”、“治国篇”，《四书·大学》则是“经”一章与“传”十章的结构，又补朱子《格物致知补传》，诚意篇往后编排，形成以“明明德”、“新民”、“止于至善”为&lt;strong&gt;三纲&lt;/strong&gt;，以“格物”、“致知”、“诚意”、“正心”、“修身”、“齐家“、“治国“、”平天下”为&lt;strong&gt;八目&lt;/strong&gt;的理论体系。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017051201/pic01.jpg&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;大学新义与其在四书中定位&quot;&gt;《大学》新义与其在《四书》中定位&lt;/h2&gt;

&lt;p&gt;朱子移文补传，实是借古文立新学，《大学》原文经朱子一番悉心打扮后，不仅形式变更了，含意也变得有所不同。
朱子在《大学章句·序》中写道：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“及周之衰，賢聖之君不作，學校之政不修，教化陵夷，風俗頹敗，時則有若孔子之聖，而不得君師之位以行其政教，於是獨取先王之法，誦而傳之以詔後世。”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017051201/pic02.jpg&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;可见，朱子对《大学》赞赏有嘉，认为这是教化风俗的学问，因此将此文从礼记中提出来，作为四书之一，定为“为学之纲”。&lt;/p&gt;

&lt;p&gt;《礼记·大学》原为《小戴礼记》中的一篇，阐述的是一种“博学可以为政”的“太学”，讲的是如何以礼治国，而朱子对大学则有新的理解。他认为，《大学》讲的是从格物致知到治国平天下的“修德之学“，是四书里的”&lt;strong&gt;入徳之门&lt;/strong&gt;“。朱子在作集注时，提出了许多自己的看法，在有的人看来，这些章句曲解了原文，是伪学。但朱子反本开新，使得《四书·礼记》成为南宋后的“正统之学”，构成了理学发展的重要一环。&lt;/p&gt;

&lt;p&gt;朱子章句中，有许多对旧文的新解，援“亲，当作新”一句为例，《大学》中“在亲民”的“亲”字，被解释为新，这一注解，某种程度上是为了与后文“茍日新，日日新，又日新”所照应，但这一全新的诠释，使得《大学》从为政之道转变为入徳之学。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;补传与格物致知的新诠释&quot;&gt;补传与“格物致知”的新诠释&lt;/h2&gt;

&lt;p&gt;朱子的移文补传，包括对篇目的重新编排，形成了新的体系结构，还包括了补写了《格物致知补传》，解释“格物”与“致知”。&lt;/p&gt;

&lt;p&gt;朱子移文后，前三传分别解释了三纲，即“明明德”、“亲民”、“止于至善”，第四章解释“本末”，第六至八章解释了八目中的“诚意”、“正心修身”、“修身齐家”、“齐家治国”、“治国平天下”，唯独没解释“格物致知”。朱子认为第五章是“格物致知传”，但丢失了，故补一传。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“右傳之五章，蓋釋格物、致知之義，而今亡矣。閒嘗竊取程子之意以補之。——朱熹《四书·大学》”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;而朱子补传的这一做法，是否符合《大学》之本意？&lt;/p&gt;

&lt;p&gt;朱子之所谓“格物”、“致知”，讲的是人有“&lt;strong&gt;认知天下之事物，把握事物之理&lt;/strong&gt;”的能力，讲人可以通过由认知事物而把握事物的“理”。后来，王阳明又提出了“诚意”、“致良知”为《大学》之本，提倡恢复古本《大学》。王阳明的学说重“诚意”，以孟子“良知”解释“致知”，强调“心即理”。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“物者，事也，凡意之所发必有其事，意所在之事谓之物。格者，正也，正其不正以归于正之谓也。正其不正者，去恶之谓也。归于正者，为善之谓也。夫是之谓格。——王守仁《大学问》”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;王阳明认为“格物“、”致知”、“诚意”、“正心”本意都是一样，都是为了“修身”。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“「格物」者,格其心之物也,格其意之物也,挌其知之物也:「正心」者,正其物之心也:「誠意」者,誠其物之意也:「致知」者,致其物之知也。此岂有内外彼此之分哉?——王守仁《传习录》”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;依照此观点，《礼记》不必将四者分开。由此观之，从王阳明的学说来理解“格物致知”，并不一定比朱子学说更加符合《礼记》原意。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017051201/pic03.jpg&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;钱穆先生在《〈大学〉格物新释》中提出，《大学》中并无对“物”的解释，而《大学》节选自《小戴礼记》，故对“格物”的理解应当在《小戴礼记》的别篇中找寻，并指出《礼记·乐记》中的“物至知知”便是对“格物致知”的解释：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“人心所动，物使之然也。——《礼记·乐记》”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;体现了在“物”的经验后才有人的“知”，与朱子的解释相符，由此推断朱子的解释合理。&lt;/p&gt;

&lt;p&gt;但朱子的“格物致知”与《礼记·大学》提到的“格物致知”应当是不同的，我们所《礼记·大学》讲的是“为政之道”，为政的“格物“应当是不必”穷极事物之理以推极吾之知识“的，郑玄与孔颖达在《礼记正义》注疏中给出了理解：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“格，來也。物、猶事也。其知於善深，則來善物。其知於惡深，則來惡物。言事緣人所好來也。——郑玄《礼记正义·注》”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;在郑孔二人的理解中，”格物“是果，”致知“是因，由一个人的格物来事而致其知，由果推因，以人之待物推知其知之善恶，因为只有知善者才能行善事。依照此观点，通过”格善物“，使得他人”致善知“，于是”诚意“、”正心“，”由天子以至庶人，壹是以修身为本“，从而”家齐国治天下平“。&lt;/p&gt;

&lt;p&gt;因此，朱子的理解是与郑孔所不同的。&lt;/p&gt;

&lt;p&gt;朱子补传，意在重新诠释”格物致知“的本义，从而使《大学》从”为政“之学泛化为”入徳“之学。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;小议朱子移文补传&quot;&gt;小议朱子移文补传&lt;/h2&gt;

&lt;p&gt;朱子移文补传的理由是旧本错简、传文遗失，而其做法在日后亦备受诟病，如国学大师南怀瑾先生在《原本大学微言》中批判道：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“其实，孔家老店，倒还货真价实，只是从南宋以后，这一班宋儒学家们，加入了孔家店，喧宾夺主，改变了孔家店原来的产品，掺入的冒牌太多。尤其以程、朱之说，更为明显。“&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017051201/pic04.jpg&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;但朱子的移文补传并不是毫无道理的，这是基于唐中后期经学僵化、儒家心性理论薄弱而提出的对儒学的重建，是对当时被佛学思想深入的儒学进行清理与重整。有学者认为，”阐发经学中的‘义理’符合当时的社会现实向儒家提出的要求，也是儒家解经学依照自身逻辑发展的必然结果“。&lt;/p&gt;

&lt;p&gt;《礼记·大学》本来就条理比较清晰，能自成体系。朱子通过移文补传，使得本来就条理清晰的《大学》变得更加严谨，从而形成了较为完整的理论体系。中国古代的学说理论一般是”潜隐型“的体系，如《论语》以孔子言行载道，《庄子》借寓言辨理，而朱子修《大学》补传，在理学发展上可以说是一个创举，奠定了心理学的理论基础。&lt;/p&gt;

&lt;p&gt;朱子移文补传赋予了《大学》”修德“的新含义，是思想上的一次再创造。或者说《四书·大学》是《礼记·大学》在新的历史背景下作出的转型与发展。&lt;/p&gt;

&lt;p&gt;2017.05.11 于珠海&lt;/p&gt;

&lt;p&gt;文章同步发于&lt;a href=&quot;http://www.jianshu.com/p/701d5cd24d8f&quot;&gt;简书 - 为政之学与入徳之门？ - 酸的柠萌&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 12 May 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/05/12/post01/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/05/12/post01/</guid>
        
        <category>读书</category>
        
        <category>议论</category>
        
        <category>文艺</category>
        
        
      </item>
    
      <item>
        <title>用数学画地图</title>
        <description>&lt;h2 id=&quot;1地图投影为什么会变形&quot;&gt;1、地图投影为什么会变形？&lt;/h2&gt;

&lt;p&gt;要知道变形怎么来，我们就从什么是投影讲起。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;(据维基百科)&lt;/p&gt;

  &lt;p&gt;A map projection is a systematic transformation of the latitudes and longitudes of locations on the surface of a sphere or an ellipsoid into locations on a plane.”&lt;/p&gt;

  &lt;p&gt;(孙达 蒲英虾 《地图投影》)&lt;/p&gt;

  &lt;p&gt;所谓地图投影，简单地讲就是在平面上建立与地球曲面上相对应的经纬网的数学法则。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;说白了，投影就是将地球表面的坐标网表示在平面上，那么这个用二维展绘三维的方法必定会有许多问题。一个很常举的例子就是把橘子剥皮展开铺在桌子上，那么橘子皮必然会有褶皱或裂隙 ，同样的地球表面展开的话，就一定会产生变形。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017050102/pic01.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;如上图，把地球这个大橘子剥开，沿着赤道拼接，一拉开，就成了一幅地图。&lt;/p&gt;

&lt;p&gt;当然，还有别的剥橘子展平的方法，那就是另一种投影了。&lt;/p&gt;

&lt;p&gt;变形是研究地图投影的重要部分。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;2地图是怎么投影出来的&quot;&gt;2、地图是怎么投影出来的？&lt;/h2&gt;

&lt;p&gt;要知道怎么按条件投影，就先要知道投影怎么来。&lt;/p&gt;

&lt;p&gt;传统的投影是用&lt;strong&gt;光学透视&lt;/strong&gt;的方法获得的，这样的投影简单易得，但球面与平面的数学关系不容易得到，所以现代地图投影都会采用&lt;strong&gt;数学方法&lt;/strong&gt;进行。&lt;/p&gt;

&lt;p&gt;现代地图投影方法分为&lt;strong&gt;几何透视法&lt;/strong&gt;和&lt;strong&gt;数学分析法&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;传统上的光学透视其实就是在玻璃地球的某个位置放个小灯，灯光在纸上投下的影子就成了一幅地图（也许这就是投影的最初含义了）。比如我把灯放在球心，就得到球心投影。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017050102/pic02.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;但是这用小灯泡画图的话，只能得到地图，有没有方法可以不用通过灯就能把地图做出来同时又能得到球面与平面的数学关系呢？&lt;/p&gt;

&lt;p&gt;后来的地图投影就开始用数学方法来投影了。之前的光学透视的投影我们运用光学原理的知识，应该是能算出平面与球面的数学关系的。&lt;/p&gt;

&lt;p&gt;这种关系是怎样的呢？我们将球面投影为平面，那么球上的任意一点P，就肯定能在平面上找到一点P’。那么所谓的地图投影，难道不就是一个坐标变换的过程吗？用数学上的话说，那就是映射啊！如果我们用数字表示出P和P’，那么地图投影&lt;em&gt;f&lt;/em&gt; 就变成了一个函数啦！&lt;/p&gt;

&lt;p&gt;怎么表示一个点呢？那肯定是用坐标！&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;3地图与坐标系&quot;&gt;3、地图与坐标系&lt;/h2&gt;

&lt;p&gt;坐标系有很多种啊，比如笛卡尔坐标系，极坐标系。&lt;/p&gt;

&lt;p&gt;在地理上，坐标系又是怎样的呢？我们现在有两个面，一个是平面，一个是球面（或椭球面）。&lt;/p&gt;

&lt;p&gt;地图上的坐标就是平面坐标，我们一般用数学常用的直角坐标和极坐标就好了，不过要注意哦，地理的坐标系和数学的有点不一样，x轴指向的是北边的，也就是说竖起来的那条轴才是x轴。&lt;/p&gt;

&lt;p&gt;在地球上的坐标系又是怎样呢？&lt;/p&gt;

&lt;p&gt;我们用一个椭球（我们叫他大地椭球体）来近似代替地球吧，至于这个椭球是怎么来的，大家可以参考一下&lt;a href=&quot;https://zhihu.com/question/27681013/answer/108473609&quot;&gt;@凃小图的答案&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;在这个椭球面上，我们建立了一个地理坐标系，地理坐标系其实也分成天文经纬度、大地经纬度、地心经纬度。天文经纬度可以用于大地测量中定向控制及校核数据，而在地图投影中用的一般是大地经纬度和地心经纬度。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017050102/pic03.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;大地坐标系用大地经度和大地纬度来确定面上的点。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;大地经度L&lt;/strong&gt;指过参考椭球面上某一点的大地子午面与本初子午面之间的二面角，&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;大地纬度B&lt;/strong&gt;指过参考椭球面上某一点的法线与赤道面的夹角。&lt;/p&gt;

&lt;p&gt;地心坐标系的地心指地球椭球体的质量中心。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;地心经度&lt;/strong&gt;等同于大地经度，&lt;strong&gt;地心纬度&lt;/strong&gt;是指&lt;u&gt;参考椭球体面上的任意一点和椭球体中心连线与赤道面之间的夹角&lt;/u&gt;。&lt;/p&gt;

&lt;p&gt;这经纬度的定义似乎很复杂，嗯，确实很复杂，怎么说的通俗点呢？不如我们不要看这个定义，我们只要知道&lt;strong&gt;通过经纬度就能确定这个椭球面上的点&lt;/strong&gt;就好了。&lt;/p&gt;

&lt;p&gt;当然有时候地理研究和小比例尺地图制图对精度要求不高，故常把椭球体当作正球体看待，此时，地理坐标采用地球球面坐标，经纬度均用地心经纬度。&lt;/p&gt;

&lt;p&gt;所以&lt;strong&gt;我们用数字表示了两个点&lt;/strong&gt;：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/2017050102/math01.png&quot; alt=&quot;avatar&quot; /&gt;或&lt;img src=&quot;/img/in-post/2017050102/math02.png&quot; alt=&quot;avatar&quot; /&gt;表示经纬度。&lt;/p&gt;

&lt;p&gt;用直角坐标表示为&lt;img src=&quot;/img/in-post/2017050102/math03.png&quot; alt=&quot;avatar&quot; /&gt;用极坐标表示为&lt;img src=&quot;/img/in-post/2017050102/math04.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;4再论地图投影&quot;&gt;4、再论地图投影&lt;/h2&gt;

&lt;p&gt;我们知道了地图投影是一个映射&lt;img src=&quot;/img/in-post/2017050102/math05.png&quot; alt=&quot;avatar&quot; /&gt;用数字表示P和P’两个点后，就有函数&lt;img src=&quot;/img/in-post/2017050102/math06.png&quot; alt=&quot;avatar&quot; /&gt;好了，我们是可以通过光学透视条件试着求出这个 和 的。以著名的墨卡托为例，（我们略过数学证明）其投影公式是：&lt;img src=&quot;/img/in-post/2017050102/math07.png&quot; alt=&quot;avatar&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;5地图变形&quot;&gt;5、地图变形&lt;/h2&gt;

&lt;p&gt;讲了这么久，终于扯到变形啦。&lt;/p&gt;

&lt;p&gt;在保持图形完整性前提下，将（椭）球面转化为平面，投影后得到的经纬线网形状必然会产生变形，也就是说，在投影的过程中，变形是必然存在的。&lt;/p&gt;

&lt;p&gt;投影变形使地物的几何特性发生了变化，变形一般包括长度、面积、方向（角度）变形。&lt;/p&gt;

&lt;p&gt;为了直观地体验或描述变形，我们造了个变形椭圆，我们在球上画一个小圆圈，这个小圈圈投影到平面上就会变成一个椭圆了，直观地表现了投影变形，看看这些图咯：
&lt;img src=&quot;/img/in-post/2017050102/pic04.png&quot; alt=&quot;avatar&quot; /&gt;
但我们要用数字来表示变形啊，这样才能知道具体怎么变形，才能知道是不是等角，不然你看着一个个小圈圈怎么知道它有没有变形啊。&lt;/p&gt;

&lt;p&gt;用来描述变形的有长度比、面积比、角度变形。&lt;/p&gt;

&lt;p&gt;长度比用来描述长度变形，一个微分线段ds，投影在平面上变成了ds’,那么长度比其实就是ds’与ds的比：&lt;img src=&quot;/img/in-post/2017050102/math08.png&quot; alt=&quot;avatar&quot; /&gt;不过呢，这个表示出来的并不是变形，表示变形的话，应该用变形的长度比上原长度。&lt;/p&gt;

&lt;p&gt;所以我们这样表示长度变形：&lt;img src=&quot;/img/in-post/2017050102/math09.png&quot; alt=&quot;avatar&quot; /&gt;然而这还不够，不同方向的线段变形不一样啊，我们一般只看四个方向的长度比。过同一个点的线段，有的方向的变形大，有的方向变形小，变形最大的叫极大长度比a，最小的就叫极小长度比b，这两个方向其实就是变形椭圆的长半径和短半径方向。我们称这两个方向为主方向。有时候主方向就是经纬度方向（m，n），当然有时候不是。&lt;/p&gt;

&lt;p&gt;面积比P就是变形前后的面积比，很容易就可以知道，P=ab。&lt;/p&gt;

&lt;p&gt;角度变形则是指投影前后角度的差值&lt;img src=&quot;/img/in-post/2017050102/math10.png&quot; alt=&quot;avatar&quot; /&gt;其中&lt;em&gt;β&lt;/em&gt; 指一个方向与主方向的夹角，当差值最大时（记为ω/2）有：&lt;img src=&quot;/img/in-post/2017050102/math11.png&quot; alt=&quot;avatar&quot; /&gt;
ω称为最大角度变形&lt;/p&gt;

&lt;p&gt;利用数学方法，我们可以通过a和b来考察某个投影的变形。此处就不细讲了。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;6怎么控制地图变形&quot;&gt;6、怎么控制地图变形。&lt;/h2&gt;

&lt;p&gt;对于一些几何投影，比如方位投影、圆柱投影等，他们是有自己的投影公式的。&lt;/p&gt;

&lt;p&gt;比如利用已知条件和光学透视我们可以知道正轴圆柱投影都满足以下通式。&lt;img src=&quot;/img/in-post/2017050102/pic05.png&quot; alt=&quot;avatar&quot; /&gt;其变形也有公式，推导如下：&lt;img src=&quot;/img/in-post/2017050102/pic06.png&quot; alt=&quot;avatar&quot; /&gt;这样，如果我们限定变形条件比如使得m=n（等角条件），把mn代入就有一条方程了，积分一下就可以算得投影公式。&lt;/p&gt;

&lt;p&gt;这里&lt;strong&gt;等角条件m=n&lt;/strong&gt;；&lt;strong&gt;等积条件P=mn=1&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;至于等距条件，就是是对应长度比为1（实际上是任意投影的一种）&lt;/p&gt;

&lt;p&gt;到后来的伪投影、派生投影也都是&lt;strong&gt;通过量化变形来得到投影公式从而达到控制变形&lt;/strong&gt;。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;

&lt;p&gt;1、地图开始是通过光学透视投射出来的，这就是投影的由来&lt;/p&gt;

&lt;p&gt;2、后来人们开始通过数学计算变换坐标系的方式来进行抽象的投影，不再是拿着小灯泡照来照去了。&lt;/p&gt;

&lt;p&gt;3、地图投影必定会产生变形，我们用长度比、面积比和角度变形来表示这些变形，从而分析投影变形。&lt;/p&gt;

&lt;p&gt;4、反过来如果我们要控制变形得到按条件的投影，我们就用对应的变形条件，通过数学推导到处对应的变换公式。&lt;/p&gt;

&lt;p&gt;2017.03.31 下午 于珠海&lt;/p&gt;

&lt;p&gt;问题原载于&lt;a href=&quot;https://zhihu.com/question/27681013/answer/154323255&quot;&gt;知乎 - 地图投影怎么做到按条件（等角、等面积、等距）投影的？ - 罗皓文的回答&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 01 May 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/05/01/post02/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/05/01/post02/</guid>
        
        <category>地图投影</category>
        
        <category>地图学</category>
        
        <category>地图变形</category>
        
        
      </item>
    
      <item>
        <title>搭建一个小记事本</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;“有些人种花聊以消遣，有些人种花志在卖钱；真种花者以种花为其生活，——而花亦未尝不美，未尝于人无益。（周作人《自己的园地》）”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;缘起&quot;&gt;缘起&lt;/h2&gt;

&lt;p&gt;中学时候有写周记的习惯，写得一篇文章后又会拿去给同学看，那非常的愉悦就像是幼儿园的孩子夸耀自己的手工作品一样。等到今天处于大学里，自由的时间多了，却更加无暇去作文。有无穷多的乐事、烦心事去充塞我的生活，这些大大小小的事迫使我戒掉了读书作文这种精神上的鸦片。由于某种心潮，近来终于又读起几本闲书来，自然又勾起往日的那些瘾。&lt;/p&gt;

&lt;p&gt;这个世界很热闹，倘若我可以在其中垦一片自己的园地，那便是很好的。&lt;/p&gt;

&lt;p&gt;我写小诗，写小说，写小杂文，也写学习上的小收获。&lt;/p&gt;

&lt;p&gt;可是写在纸上的文字是没人能看到的，我便开垦了一个这样的小园地，种上我自己的菜苗。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;开荒&quot;&gt;开荒&lt;/h2&gt;

&lt;p&gt;我一直就在试着建个小站，申请了个免费的域名&lt;a href=&quot;https://rimoe.ml/&quot;&gt;rimoe.ml&lt;/a&gt;，用&lt;a href=&quot;https://pages.github.com/&quot;&gt;GitHub Pages&lt;/a&gt; + &lt;a href=&quot;http://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;搭了个简易的小网页，后来因为忙就荒废了。&lt;/p&gt;

&lt;p&gt;后来想写点东西时，就继续搭建我的小站，在GitHub上pull了两个模版，捣鼓一下代码，便出来了这个简单的网页。&lt;/p&gt;

&lt;p&gt;过程中不免走了些许弯路，但在模版上小修小改还是颇为容易的，就这样勉强地把我贫瘠的小园地垦出来了。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;后记&quot;&gt;后记&lt;/h2&gt;

&lt;p&gt;世界变得飞快，万物在生长，科技也在生长，一不留神就会被时代的浪潮所淹没。倘若不能站在浪尖上，那便写一些无声的文字，研究一些过气的技术，或许也能慰藉一下自己。&lt;/p&gt;

&lt;p&gt;2017.05.01 早晨 于珠海&lt;/p&gt;
</description>
        <pubDate>Mon, 01 May 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/05/01/post01/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/05/01/post01/</guid>
        
        <category>生活</category>
        
        <category>文艺</category>
        
        
      </item>
    
  </channel>
</rss>
